{"version":3,"file":"js/User.0a1ea0e9.js","mappings":"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","sources":["webpack://head-line/./src/views/User/index.vue","webpack://head-line/src/views/User/index.vue","webpack://head-line/./src/views/User/index.vue?50c1","webpack://head-line/./src/views/User/index.vue?e486","webpack://head-line/./src/api/User.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"user-container\"},[_c('div',{staticClass:\"user-card\"},[_c('van-cell',{scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.$store.state.userPhoto,\"alt\":\"\"}})]},proxy:true},{key:\"title\",fn:function(){return [_c('span',{staticClass:\"username\"},[_vm._v(_vm._s(_vm.userObj.name))])]},proxy:true},{key:\"label\",fn:function(){return [_c('van-tag',{attrs:{\"color\":\"#fff\",\"text-color\":\"#007bff\"}},[_vm._v(\"申请认证\")])]},proxy:true}])}),_c('div',{staticClass:\"user-data\"},[_c('div',{staticClass:\"user-data-item\"},[_c('span',[_vm._v(_vm._s(_vm.userObj.art_count))]),_c('span',[_vm._v(\"动态\")])]),_c('div',{staticClass:\"user-data-item\"},[_c('span',[_vm._v(_vm._s(_vm.userObj.follow_count))]),_c('span',[_vm._v(\"关注\")])]),_c('div',{staticClass:\"user-data-item\"},[_c('span',[_vm._v(_vm._s(_vm.userObj.fans_count))]),_c('span',[_vm._v(\"粉丝\")])])])],1),_c('van-cell-group',{staticClass:\"action-card\"},[_c('van-cell',{attrs:{\"icon\":\"edit\",\"title\":\"编辑资料\",\"is-link\":\"\",\"to\":\"/user_edit\"}}),_c('van-cell',{attrs:{\"icon\":\"chat-o\",\"title\":\"小思同学\",\"is-link\":\"\",\"to\":\"/chat\"}}),_c('van-cell',{attrs:{\"icon\":\"warning-o\",\"title\":\"退出登录\",\"is-link\":\"\"},on:{\"click\":_vm.quitFn}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"user-container\">\n    <!-- 用户基本信息面板 -->\n    <div class=\"user-card\">\n      <!-- 用户头像、姓名 -->\n      <van-cell>\n        <!-- 使用 title 插槽来自定义标题 用户头像userObj.photo改成从state取-->\n        <template #icon>\n          <img :src=\"$store.state.userPhoto\" alt=\"\" class=\"avatar\" />\n        </template>\n        <template #title>\n          <span class=\"username\">{{ userObj.name }}</span>\n        </template>\n        <template #label>\n          <van-tag color=\"#fff\" text-color=\"#007bff\">申请认证</van-tag>\n        </template>\n      </van-cell>\n      <!-- 动态、关注、粉丝 -->\n      <div class=\"user-data\">\n        <div class=\"user-data-item\">\n          <span>{{ userObj.art_count }}</span>\n          <span>动态</span>\n        </div>\n        <div class=\"user-data-item\">\n          <span>{{ userObj.follow_count }}</span>\n          <span>关注</span>\n        </div>\n        <div class=\"user-data-item\">\n          <span>{{ userObj.fans_count }}</span>\n          <span>粉丝</span>\n        </div>\n      </div>\n    </div>\n\n    <!-- 操作面板 van-cell有路由跳转功能is-link to -->\n    <van-cell-group class=\"action-card\">\n      <van-cell icon=\"edit\" title=\"编辑资料\" is-link to=\"/user_edit\" />\n      <van-cell icon=\"chat-o\" title=\"小思同学\" is-link to=\"/chat\" />\n      <van-cell icon=\"warning-o\" title=\"退出登录\" is-link @click=\"quitFn\" />\n    </van-cell-group>\n  </div>\n</template>\n\n<script>\nimport { userInfoAPI } from '@/api/User.js'\nimport { Dialog } from 'vant'\nimport { removeToken, removeReToken } from '@/utils/token.js'\nexport default {\n  name: 'myUser',\n  data() {\n    return {\n      userObj: {}\n    }\n  },\n  async created() {\n    const { data: res } = await userInfoAPI()\n    this.userObj = res.data\n    // 将头像发给state\n    this.$store.commit('SET_USERPHOTO', this.userObj.photo)\n  },\n  methods: {\n    // 主动退出登录\n    quitFn() {\n      Dialog.confirm({\n        title: '提示',\n        message: '是否退出登录'\n      })\n        .then(() => {\n          // 点击确认回调函数\n          // 删除token\n          removeToken()\n          removeReToken()\n          this.$router.replace('/login')\n        })\n        .catch(() => {\n          // 点击删除回调函数\n        })\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n.user-container {\n  .user-card {\n    background-color: #007bff;\n    color: white;\n    padding-top: 20px;\n    .van-cell {\n      background: #007bff;\n      color: white;\n      &::after {\n        display: none;\n      }\n      .avatar {\n        width: 60px;\n        height: 60px;\n        background-color: #fff;\n        border-radius: 50%;\n        margin-right: 10px;\n      }\n      .username {\n        font-size: 14px;\n        font-weight: bold;\n      }\n    }\n  }\n  .user-data {\n    display: flex;\n    justify-content: space-evenly;\n    align-items: center;\n    font-size: 14px;\n    padding: 30px 0;\n    .user-data-item {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      width: 33.33%;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=88ebfb58&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=88ebfb58&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"88ebfb58\",\n  null\n  \n)\n\nexport default component.exports","// 统一封装接口\nimport axios from '@/utils/request.js'\n//  需要header的请求在请求拦截器里已经统一装好了\n\n// 登录接口\nexport const loginAPI = ({ mobile, code }) => {\n    return axios({\n        url: '/v1_0/authorizations',\n        method: 'POST',\n        data: {\n            mobile,\n            code\n        }\n    })\n}\n\n\n// 个人中心-用户个人资料,只要token,没有粉丝数关注等信息,给 我的 编辑用户资料用的\nexport const userProfileAPI = () => {\n    return axios({\n        url: '/v1_0/user/profile',\n        method: 'GET',\n    })\n}\n\n// 个人中心-用户所有信息，给 我的 界面显示用的\nexport const userInfoAPI = () => {\n    return axios({\n        url: '/v1_0/user',\n        method: 'GET',\n    })\n}\n\n// 个人中心-更新头像FormData表单\nexport const updateUserPhotoAPI = (fd) => {\n    return axios({\n        url: '/v1_0/user/photo',\n        method: 'PATCH',\n        // 如果请求体直接是FormData表单对象,不用自己添加Content-Type\n        // axios发现数据请求体是表单对象,他不会转换成json字符串\n        // 也不会带Content-Type:application/json,而是交给浏览器，\n        // 浏览器发现请求体是FormData会自己携带COntentType\n        // 传FormData的话请求体不能写data:{},否则还是转成json\n        data: fd\n    })\n}\n\n// 个人中心-更新基本信息\nexport const updatUserProfileAPI = (userObj) => {\n    const obj = {\n        name: '',\n        gender: 0,\n        birthday: ''\n    }\n    // 循环obj\n    for (const key in obj) {\n        // 如果外界传来的对象userObj没有key属性，就把obj的key属性删了\n        if (userObj[key] === undefined) {\n            delete obj[key]\n        } else {\n            // 若obj,userObj都有key的话,就把userObj的key替换掉obj的key\n            obj[key] = userObj[key]\n        }\n    }\n    return axios({\n        url: '/v1_0/user/profile',\n        method: 'PATCH',\n        data: obj\n        // 因为data里的参数不能忽略，但是这几个参数是可选值，所以\n        // 前端传递对象里面有前端需要的值，data接收这个对象\n        // data: {\n        //     name,\n        //     // 性别\n        //     gender,\n        //     birthday,\n        //     // 个人介绍\n        //     intro\n        // }\n\n    })\n}"],"names":["render","_vm","this","_c","_self","staticClass","scopedSlots","_u","key","fn","attrs","$store","state","userPhoto","proxy","_v","_s","userObj","name","art_count","follow_count","fans_count","on","quitFn","staticRenderFns","data","methods","title","message","then","removeToken","removeReToken","catch","component","loginAPI","mobile","code","axios","url","method","userProfileAPI","userInfoAPI","updateUserPhotoAPI","fd","updatUserProfileAPI","obj","gender","birthday","undefined"],"sourceRoot":""}