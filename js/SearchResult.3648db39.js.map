{"version":3,"file":"js/SearchResult.3648db39.js","mappings":"8JAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACA,EAAG,MAAM,CAACE,YAAY,2BAA2B,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQ,OAAO,aAAa,GAAG,MAAQ,IAAIC,GAAG,CAAC,aAAa,SAASC,GAAQ,OAAOP,EAAIQ,QAAQC,IAAI,EAAG,MAAK,GAAGP,EAAG,MAAM,CAACA,EAAG,WAAW,CAACG,MAAM,CAAC,SAAWL,EAAIU,SAAS,gBAAgB,QAAQ,mBAAkB,GAAOJ,GAAG,CAAC,KAAON,EAAIW,QAAQC,MAAM,CAACC,MAAOb,EAAIc,QAASC,SAAS,SAAUC,GAAMhB,EAAIc,QAAQE,CAAI,EAACC,WAAW,YAAYjB,EAAIkB,GAAIlB,EAAImB,aAAa,SAASC,GAAM,OAAOlB,EAAG,eAAe,CAACmB,IAAID,EAAKE,OAAOjB,MAAM,CAAC,WAAae,EAAK,QAAS,GAAOG,SAAS,CAAC,MAAQ,SAAShB,GAAQ,OAAOP,EAAIwB,YAAYJ,EAAKE,OAAQ,IAAI,IAAE,IAAI,IAC9qB,EACGG,EAAkB,G,kBCmCtB,GACAC,KAAAA,eACAC,OACA,OAEAC,KAAAA,EAEAT,YAAAA,GAEAL,SAAAA,EAEAJ,UAAAA,EAEA,EACAmB,WAAAA,CACAC,YAAAA,EAAAA,GAEA,gBAGA,MAAAH,KAAAA,SAAA,QACAC,KAAAA,KAAAA,KACAG,EAAAA,KAAAA,OAAAA,OAAAA,KAEA,+BACA,EACAC,QAAAA,CACA,eAEA,8BACA,YAEA,MAAAL,KAAAA,SAAA,QACAC,KAAAA,KAAAA,KACAG,EAAAA,KAAAA,OAAAA,OAAAA,KAGA,4BACA,kBAGA,yDAEA,eACA,CACA,EAEAP,YAAAA,GACA,wCAEA,ICvFqQ,I,UCQjQS,GAAY,OACd,EACAlC,EACA0B,GACA,EACA,KACA,WACA,MAIF,EAAeQ,EAAiB,O,2FCdzB,MAAMC,EAAiB,EAAGC,eACtBC,EAAAA,EAAAA,GAAM,CACTC,IAAK,mBACLC,OAAQ,MACRC,OAAQ,CACJR,EAAGI,KAMFK,EAAkB,EAAGZ,OAAO,EAAGa,UAAU,GAAIV,QAC/CK,EAAAA,EAAAA,GAAM,CACTC,IAAK,eACLC,OAAQ,MAERC,OAAQ,CACJX,OACAc,SAAUD,EACVV,M","sources":["webpack://head-line/./src/views/Search/SearchResult.vue","webpack://head-line/src/views/Search/SearchResult.vue","webpack://head-line/./src/views/Search/SearchResult.vue?d4f0","webpack://head-line/./src/views/Search/SearchResult.vue?576b","webpack://head-line/./src/api/Search.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"search-result-container\"},[_c('van-nav-bar',{attrs:{\"title\":\"搜索结果\",\"left-arrow\":\"\",\"fixed\":\"\"},on:{\"click-left\":function($event){return _vm.$router.go(-1)}}})],1),_c('div',[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\",\"immediate-check\":false},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.articleList),function(item){return _c('article-item',{key:item.art_id,attrs:{\"articleObj\":item,\"isShow\":false},nativeOn:{\"click\":function($event){return _vm.itemClickFn(item.art_id)}}})}),1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <!-- 搜索结果页-头部导航 -->\n    <div class=\"search-result-container\">\n      <!-- 点击实现后退效果 -->\n      <van-nav-bar\n        title=\"搜索结果\"\n        left-arrow\n        @click-left=\"$router.go(-1)\"\n        fixed\n      />\n    </div>\n    <!-- 搜索结果列表 -->\n    <div>\n      <van-list\n        v-model=\"loading\"\n        :finished=\"finished\"\n        finished-text=\"没有更多了\"\n        @load=\"onLoad\"\n        :immediate-check=\"false\"\n      >\n        <article-item\n          v-for=\"item in articleList\"\n          :key=\"item.art_id\"\n          :articleObj=\"item\"\n          :isShow=\"false\"\n          @click.native=\"itemClickFn(item.art_id)\"\n        ></article-item>\n      </van-list>\n    </div>\n  </div>\n</template>\n\n<script>\n// @click.native是给组件内 根标签 绑定事件，相当于绑定原生点击事件,和子组件里的方法什么的没关系\nimport { searchResultAPI } from '@/api/Search.js'\nimport ArticleItem from '@/components/Common/ArticleItem.vue'\nexport default {\n  name: 'SearchResult',\n  data() {\n    return {\n      // 页码\n      page: 1,\n      // 搜索结果数组\n      articleList: [],\n      // 加载状态\n      loading: false,\n      // 是否全部加载完成\n      finished: false\n    }\n  },\n  components: {\n    ArticleItem\n  },\n  async created() {\n    //per_page不用传已经有默认值10了,关键字q通过 $route获取当前路由对象的params获取/:kw的kw\n    // console.log(this.$route)\n    const { data: res } = await searchResultAPI({\n      page: this.page,\n      q: this.$route.params.kw\n    })\n    this.articleList = res.data.results\n  },\n  methods: {\n    async onLoad() {\n      // 和首页数据一样不要一上来就加载更多，要有数据，再上拉加载更多\n      if (this.articleList.length > 0) {\n        this.page++\n        // 再获取第2页的新的10个数据\n        const { data: res } = await searchResultAPI({\n          page: this.page,\n          q: this.$route.params.kw\n        })\n        // 没有更多数据了，要把finished状态改成true\n        if (res.data.results.length === 0) {\n          this.finished = true\n        }\n        // 合并数据\n        this.articleList = [...this.articleList, ...res.data.results]\n        // 加载状态改成false\n        this.loading = false\n      }\n    },\n    // 搜索列表的文章点击跳转详情\n    itemClickFn(id) {\n      this.$router.push(`/detail?art_id=${id}`)\n      // 行不通:this.$router.push({ name: 'detail', params: { art_id: id } })\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.search-result-container {\n  padding-top: 46px;\n}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SearchResult.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SearchResult.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchResult.vue?vue&type=template&id=c4740410&scoped=true&\"\nimport script from \"./SearchResult.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchResult.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SearchResult.vue?vue&type=style&index=0&id=c4740410&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c4740410\",\n  null\n  \n)\n\nexport default component.exports","// 统一封装接口\nimport axios from '@/utils/request.js'\n//  需要header的请求在请求拦截器里已经统一装好了\n\n// 搜索-联想菜单\nexport const suggestListAPI = ({ keywords }) => {\n    return axios({\n        url: '/v1_0/suggestion',\n        method: 'GET',\n        params: {\n            q: keywords\n        },\n    })\n}\n\n// 搜索-搜索结果列表\nexport const searchResultAPI = ({ page = 1, perPage = 10, q }) => {\n    return axios({\n        url: '/v1_0/search',\n        method: 'GET',\n        //  接口文档说前两个参数可不传，默认只获取1页10条数据就行\n        params: {\n            page,\n            per_page: perPage,\n            q\n        },\n    })\n}"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","$event","$router","go","finished","onLoad","model","value","loading","callback","$$v","expression","_l","articleList","item","key","art_id","nativeOn","itemClickFn","staticRenderFns","name","data","page","components","ArticleItem","q","methods","component","suggestListAPI","keywords","axios","url","method","params","searchResultAPI","perPage","per_page"],"sourceRoot":""}